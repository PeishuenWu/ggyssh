# WebSocket-to-SSH 桥接器 (GgySSH) 规格说明书

## 1. 项目概述
GgySSH 是一个基于 Web 的实用工具，允许用户通过浏览器访问远程 SSH 终端并直接上传文件。它使用 WebSockets 将浏览器的终端模拟器与远程 SSH 会话连接起来，并使用 SFTP 进行文件管理。

## 2. 架构设计
- **前端**: 一个单页应用 (SPA)，使用 Xterm.js 进行终端模拟。支持密码和私钥认证。
- **后端**: 一个 Go 服务器，处理 WebSocket 终端桥接和 SFTP 文件上传。

## 3. 技术栈
- **后端**: Go, `x/crypto/ssh`, `gorilla/websocket`, `pkg/sftp`。
- **前端**: Xterm.js。

## 4. 核心组件
### 4.1 后端
- **认证与桥接**: 支持多认证方式的 SSH 拨号及 WS 数据转发。
- **SFTP 服务**: 处理文件上传至远程主机的请求。

### 4.2 前端
- **终端交互**: 实时显示远程 Shell。
- **上传增强**: 支持在文件上传成功后，可选地将文件的完整远程路径自动输入到当前活动的终端会话中。

## 5. 数据流
### 自动化输入功能
1. 用户在上传区域勾选“上传后自动输入路径”。
2. 文件上传成功。
3. 前端通过已建立的 WebSocket 连接，将文件完整路径发送至后端。
4. 后端将数据写入 SSH 标准输入，路径即出现在远程 Shell 中。

## 6. 安全考虑
- 凭据仅留存在内存。
- 建议配合 HTTPS 使用。

## 7. 开发阶段
1. 基础桥接。
2. SFTP 功能。
3. 配置文件支持。
4. 私钥认证支持。
5. 第五阶段: 实现上传成功后自动在终端输入路径的功能。
